{% macro input_dropdown(name, label, map, default) -%}
<div class="form-group">
	<label for="{{ name }}">{{ label }}</label>
	<select name="{{ name }}" class="form-control">
		{% for value,desc in map|dictsort %}
			{%- if value == default -%}
		<option selected="selected" value="{{ value }}">{{ desc }}</option>
			{%- else -%}
		<option value="{{ value }}">{{ desc }}</option>
			{%- endif %}
		{% endfor %}
	</select>
</div>
{%- endmacro %}

{% macro input_topic(name, label, topics, default) -%}
{{ input_dropdown(name, label, topics, default)}}
{%- endmacro %}

{% macro input_medium(name, label, default) -%}
{{ input_dropdown(name, label, {"": "Text and Video", "Text": "Text", "Video": "Video"}, default)}}
{%- endmacro %}

{% macro input_timing(name, label, default) -%}
{{ input_dropdown(name, label, {"": "Vorher und Nachher", "Vorher": "Vorher", "Nachher": "Nachher"}, default)}}
{%- endmacro %}

{% macro input_group(name, label, groups, default) -%}
{{ input_dropdown(name, label, groups, default)}}
{%- endmacro %}

{% macro input_verification(label, prefix, default) -%}
<div class="row">
	<div class="col-md-1"><label>{{ label }}:</label></div>
{% for v in verifications() %}
	<div class="col-md-2">
		<label class="checkbox-inline">
		{% if isSet(v.id,default) %}
			<input type="checkbox" name="verification_{{ prefix }}_{{ v.id }}" checked="checked" /> {{ v.name }}
		{% else %}
			<input type="checkbox" name="verification_{{ prefix }}_{{ v.id }}" /> {{ v.name }}
		{% endif %}
		</label>
	</div>
{% endfor %}
</div>
{%- endmacro %}

{% macro stats_generic_filter() -%}
<div class="row">
	<div class="col-md-4">
		{{ input_topic("topic", "Topic", topics(), topic) }}
	</div>
	<div class="col-md-3">
		{{ input_medium("medium", "Medium", medium) }}
	</div>
	<div class="col-md-3">
		{{ input_timing("timing", "Timing", timing) }}
	</div>
	<div class="col-md-2">
		{{ input_group("group", "Group", groups(), group) }}
	</div>
</div>
{{ input_verification("Required", "require", verification_require) }}
{{ input_verification("Excluded", "exclude", verification_exclude) }}
{%- endmacro %}

{% macro listing(head,body,foot) -%}
<table class="table table-striped table-condensed">
	<thead>
		{% for h in head -%}
		<th>{{ h }}</th>
		{% endfor %}
	</thead>
	<tbody>
		{% for row in body -%}
		<tr>
			{% for item in row -%}
			<td>{{ item }}</td>
			{% endfor %}
		</tr>
		{% endfor %}
	</tbody>
	{% if foot %}
	<tfoot>
		<tr>
			{% for item in foot -%}
			<th>{{ item }}</th>
			{% endfor %}
		</tr>
	</tfoot>
	{% endif %}
</table>
{%- endmacro %}

{% macro table(cols,rows,body) -%}
<table class="table table-striped table-condensed">
	<thead>
		<th></th>
		{% for h in cols %}
			<th class="rotate"><div><span>{{ h }}</span></div></th>
		{% endfor %}
	</thead>
	<tbody>
		{% for row in body %}
		<tr>
			<th>{{ rows[loop.index0] }}</th>
			{% for item in row %}
			<td>{{ item }}</td>
			{% endfor %}
		</tr>
		{% endfor %}
	</tbody>
</table>
{%- endmacro %}

{% macro show_plot(name, filename) -%}
{% if filename %}
	{% if name %}
	<div class="panel panel-default">
		<div class="panel-heading">{{ name }}</div>
		<div class="panel-body">
			<div class="text-center">
				<img src="{{ filename}}" />
			</div>
		</div>
	</div>
	{% else %}
	<div class="text-center">
		<img src="{{ filename}}" />
	</div>
	{% endif %}
{% endif %}
{%- endmacro %}

{% macro show_core_stats(topic) %}
<ul class="list-inline">
	{% for key,val in core_stats(topic)|dictsort %}
	<li>{{ key }} <span class="badge">{{ val }}</span></li>
	{% endfor %}
</ul>
{% endmacro %}
